{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 450,
  "transform": [
    {
    
      "filter": "causeFilter == false || causeFilter && test(datum.Summary, /crashed/i)"
    }
  ],
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/InkyWinky/w9hw/refs/heads/main/au-states-topo.json",
        "format": {
          "type": "topojson",
          "feature": "austates"
        }
      },
      "projection": {
        "type": "mercator"
      },
      "mark": {
        "type": "geoshape",
        "fill": "lightgray",
        "stroke": "#f1ede4"
      }
    },
    
    {
      "data": {
        "url": "https://raw.githubusercontent.com/InkyWinky/w9hw/refs/heads/main/geocoded_locations_new_aus_only.csv"
      },
      "projection": {
        "type": "mercator"
      },
      "mark": {
        "type": "image",
            "url": "https://raw.githubusercontent.com/InkyWinky/w9hw/refs/heads/main/airplane-icon.png",
            "width": 15,
            "height": 15,
            "tooltip": true
      },
      "encoding": {
        "longitude": {
          "field": "Longitude",
          "type": "quantitative"
        },
        "latitude": {
          "field": "Latitude",
          "type": "quantitative"
        },
        "size": {
            "field": "fatalityQty",
            "type": "quantitative",
            "title": "Number of Fatalities",
            "scale": {"range": [500, 4000]}
          },
        "color": {"value": "steelblue"},
        "tooltip":[{
            "field": "Locations", "title": "Location",
            "type": "nominal"
        
          },
          {
            "field": "fatalities", "title": "Fatalities",
            "type": "nominal"
          }]
      },
      "signals": [
    {
      "name": "causeFilter",
      "value": false 
    }
  ]
      
    }
  ],
  "config": {
        "background": null,
        "view":{ "stroke": "transparent" }
      }
}
